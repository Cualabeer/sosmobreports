<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOS Mechanics | Priority Deployment 2026</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    
    <style>
        [x-cloak] { display: none !important; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #0c0819; color: #ffffff; }
        
        /* Premium Textures */
        .glass-dark { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .ticket-bg { background: #ffffff; color: #0c0819; position: relative; }
        
        /* Aesthetic Ticket Notches */
        .ticket-bg::before, .ticket-bg::after {
            content: ''; position: absolute; width: 40px; height: 40px; 
            background: #0c0819; border-radius: 50%; top: 50%; transform: translateY(-50%);
        }
        .ticket-bg::before { left: -25px; }
        .ticket-bg::after { right: -25px; }

        .gradient-text { background: linear-gradient(90deg, #9333ea, #c026d3); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        @media print { 
            .no-print { display: none !important; } 
            body { background: white !important; }
            .ticket-bg::before, .ticket-bg::after { display: none; }
        }
    </style>
</head>

<body x-data="{ 
    step: 1, confirmed: false, name: '', reg: '', postcode: '',
    majorJobs: {'Clutch Replacement': 895, 'Full Engine Service': 349, 'Gearbox Repair': 1200},
    smallerJobs: {'Brake Overhaul': 420, 'Spring Replacement': 185, 'EV Service': 210},
    minorJobs: {'Diagnostics': 125, 'Battery Swap': 95, 'Puncture Repair': 65},
    cart: [],
    bookingRef: '', timestamp: '',
    getAll() { return {...this.majorJobs, ...this.smallerJobs, ...this.minorJobs} },
    getTotal() { return this.cart.reduce((sum, i) => sum + (this.getAll()[i] || 0), 0) },
    confirm() {
        this.bookingRef = 'SOS-' + Math.random().toString(36).substr(2, 6).toUpperCase();
        this.timestamp = new Date().toLocaleString('en-GB', { dateStyle: 'medium', timeStyle: 'short' });
        this.confirmed = true;
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
}" x-cloak>

    <!-- Header -->
    <header class="max-w-6xl mx-auto p-6 flex justify-between items-center no-print">
        <div class="text-2xl font-black italic tracking-tighter">SOS<span class="text-purple-500">.</span></div>
        <div class="px-4 py-1 rounded-full border border-white/10 text-[10px] font-bold tracking-widest text-white/50 uppercase">Fleet System 2.0</div>
    </header>

    <main class="max-w-4xl mx-auto p-6 mt-4">
        
        <!-- STEP 1-3 FLOW (MINIFIED) -->
        <div x-show="!confirmed" class="space-y-6">
            <div class="glass-dark rounded-[2.5rem] p-10 text-center">
                <h1 class="text-4xl font-black mb-8 italic">READY FOR <span class="gradient-text">DEPLOYMENT?</span></h1>
                <div class="grid gap-4 max-w-md mx-auto">
                    <input x-model="name" placeholder="Passenger Name" class="bg-white/5 border border-white/10 p-5 rounded-2xl w-full outline-none focus:border-purple-500 transition">
                    <input x-model="reg" placeholder="Vehicle Registration" class="bg-white/5 border border-white/10 p-5 rounded-2xl w-full text-center font-black uppercase tracking-widest outline-none focus:border-purple-500 transition">
                    <input x-model="postcode" placeholder="Medway Postcode" class="bg-white/5 border border-white/10 p-5 rounded-2xl w-full outline-none focus:border-purple-500 transition">
                </div>
                
                <div class="mt-10">
                    <p class="text-[10px] font-bold uppercase tracking-[0.4em] text-white/30 mb-6">Select Priority Services</p>
                    <div class="flex flex-wrap justify-center gap-3">
                        <template x-for="(p, item) in getAll()">
                            <button @click="cart.includes(item) ? cart = cart.filter(i => i!==item) : cart.push(item)"
                                    :class="cart.includes(item) ? 'bg-purple-600 border-purple-400' : 'bg-white/5 border-white/10'"
                                    class="px-6 py-3 rounded-full border text-xs font-bold transition-all">
                                <span x-text="item"></span>
                            </button>
                        </template>
                    </div>
                </div>

                <button @click="confirm()" :disabled="!name || !reg || cart.length === 0" 
                        class="mt-12 w-full max-w-sm bg-white text-black font-black py-5 rounded-2xl hover:scale-105 transition disabled:opacity-20">
                    GENERATE TICKET
                </button>
            </div>
        </div>

        <!-- THE BEAUTIFUL SUMMARY TICKET -->
        <div x-show="confirmed" x-transition:enter="transition ease-out duration-500" x-transition:enter-start="opacity-0 scale-95" class="pb-20">
            
            <div class="ticket-bg rounded-[3rem] shadow-[0_35px_60px_-15px_rgba(0,0,0,0.5)] overflow-hidden">
                
                <!-- Ticket Header: Deep Gradient -->
                <div class="bg-gradient-to-br from-[#0c0819] via-[#1a1435] to-[#0c0819] p-10 md:p-14 text-white">
                    <div class="flex flex-col md:flex-row justify-between items-start gap-8">
                        <div>
                            <div class="flex items-center gap-3 mb-4">
                                <span class="bg-green-500 w-2 h-2 rounded-full animate-ping"></span>
                                <span class="text-[10px] font-black tracking-[0.3em] text-green-400 uppercase">System: Confirmed</span>
                            </div>
                            <h2 class="text-4xl md:text-6xl font-black tracking-tighter italic">PRIORITY<br><span class="text-purple-500 uppercase">Deployment</span></h2>
                        </div>
                        <div class="text-left md:text-right">
                            <p class="text-[10px] font-black text-white/40 uppercase tracking-widest mb-2">Booking Identifier</p>
                            <div class="font-mono text-2xl md:text-3xl font-bold bg-white/5 border border-white/10 px-6 py-3 rounded-2xl inline-block" x-text="bookingRef"></div>
                        </div>
                    </div>
                </div>

                <!-- Ticket Body -->
                <div class="p-10 md:p-14 bg-white">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-12">
                        <div class="space-y-1">
                            <p class="text-[9px] font-black text-gray-400 uppercase tracking-widest">Passenger</p>
                            <p class="font-bold text-lg" x-text="name"></p>
                        </div>
                        <div class="space-y-1">
                            <p class="text-[9px] font-black text-gray-400 uppercase tracking-widest">Registration</p>
                            <p class="font-bold text-lg text-purple-600" x-text="reg"></p>
                        </div>
                        <div class="space-y-1">
                            <p class="text-[9px] font-black text-gray-400 uppercase tracking-widest">Zone</p>
                            <p class="font-bold text-lg uppercase" x-text="postcode"></p>
                        </div>
                        <div class="space-y-1">
                            <p class="text-[9px] font-black text-gray-400 uppercase tracking-widest">Issued</p>
                            <p class="font-bold text-lg" x-text="timestamp"></p>
                        </div>
                    </div>

                    <div class="border-t-2 border-dashed border-gray-100 pt-10">
                        <p class="text-[10px] font-black text-gray-300 uppercase tracking-[0.4em] mb-8">Selected Itinerary</p>
                        <div class="space-y-5">
                            <template x-for="item in cart">
                                <div class="flex justify-between items-end">
                                    <div>
                                        <p class="font-black text-sm uppercase italic" x-text="item"></p>
                                        <p class="text-[9px] text-gray-400 font-bold uppercase">2026 Mobile Service Unit</p>
                                    </div>
                                    <p class="font-mono font-bold text-gray-900" x-text="'£' + getAll()[item]"></p>
                                </div>
                            </template>
                        </div>

                        <div class="mt-12 flex flex-col md:flex-row justify-between items-center bg-gray-50 rounded-[2rem] p-8 gap-4">
                            <div>
                                <h3 class="font-black text-3xl italic tracking-tighter">TOTAL PAID</h3>
                                <p class="text-[9px] font-bold text-gray-400 uppercase">VAT & Call-out fee included</p>
                            </div>
                            <div class="text-4xl md:text-6xl font-black tracking-tighter" x-text="'£' + getTotal()"></div>
                        </div>
                    </div>

                    <!-- Seal & Barcode -->
                    <div class="mt-16 flex flex-col items-center">
                        <div class="w-full h-12 bg-[url('https://www.drupal.org/files/project-images/barcode.png')] bg-repeat-x opacity-10 mb-8"></div>
                        <div class="flex flex-col md:flex-row gap-4 w-full no-print">
                            <button onclick="window.print()" class="flex-1 bg-black text-white font-black py-5 rounded-2xl uppercase text-xs tracking-widest hover:bg-zinc-800 transition">Print as PDF</button>
                            <button @click="confirmed = false; cart = [];" class="flex-1 border border-gray-200 text-gray-400 font-black py-5 rounded-2xl uppercase text-xs tracking-widest hover:bg-gray-50 transition">New Job</button>
                        </div>
                    </div>
                </div>
            </div>

            <p class="text-center mt-10 text-[10px] font-bold text-white/20 uppercase tracking-[0.5em]">SOS Mechanics Medway • Digital Boarding Pass</p>
        </div>
    </main>

</body>
</html>