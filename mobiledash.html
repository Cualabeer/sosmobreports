<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>On-Demand Mechanic Dashboard</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin:0;
    padding:0;
    background:#111;
    color:#fff;
  }
  /* Neon QR Section */
  #qr-section {
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    border: 3px solid #8e2eff;
    box-shadow: 0 0 20px #8e2eff, 0 0 40px #00ff66;
    border-radius: 15px;
    padding: 20px;
    margin: 20px auto;
    width: 90%;
    max-width: 400px;
    text-align:center;
    transition: transform 0.2s ease;
    cursor:pointer;
  }
  #qr-section h2 { color:#8e2eff; text-shadow:0 0 10px #8e2eff; }
  #qr-section p { color:#00ff66; text-shadow:0 0 8px #00ff66; }
  #qr-section button {
    background:#8e2eff;
    color:white;
    padding:12px 20px;
    border:none;
    border-radius:10px;
    font-weight:bold;
    font-size:1rem;
    box-shadow:0 0 15px #00ff66;
  }

  /* Full-screen modals */
  .modal {
    display:none;
    position:fixed;
    top:0; left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.95);
    justify-content:center;
    align-items:flex-start;
    overflow-y:auto;
    z-index:1000;
    padding-top:30px;
  }
  .modal-content {
    background:#222;
    color:#fff;
    border-radius:12px;
    padding:20px;
    width:95%;
    max-width:500px;
    margin:0 auto 30px auto;
    box-shadow:0 0 15px #00ff66;
  }
  .modal-content h2,h3 { color:#00ff66; margin-top:15px; }
  .modal-content label { display:block; margin:8px 0; }
  .modal-content input[type="checkbox"] { margin-right:10px; }
  .action-btn {
    margin-top:20px;
    width:100%;
    padding:12px;
    font-size:1rem;
    font-weight:bold;
    color:#fff;
    background:#8e2eff;
    border:none;
    border-radius:10px;
    box-shadow:0 0 10px #00ff66;
    cursor:pointer;
  }
  .close-btn {
    position:absolute;
    top:10px; right:15px;
    font-size:1.5rem;
    cursor:pointer;
  }

  /* Timer display */
  #job-timer {
    font-size:1.5rem;
    text-align:center;
    margin:15px;
    color:#00ff66;
    text-shadow:0 0 10px #00ff66;
  }
</style>
</head>
<body>

<!-- QR Scan Section -->
<div id="qr-section">
  <h2>Scan QR to Start Job</h2>
  <p>Tap here to activate camera or upload QR image</p>
  <button id="start-qr-scan">Activate QR Scanner</button>
</div>

<!-- Job Card Modal -->
<div id="job-modal" class="modal">
  <div class="modal-content">
    <span class="close-btn" id="close-job">&times;</span>
    <h2>Job Card</h2>
    <div id="customer-info">
      <p><strong>Name:</strong> <span id="cust-name"></span></p>
      <p><strong>Car Reg:</strong> <span id="cust-reg"></span></p>
      <p><strong>Location:</strong> <span id="cust-location"></span></p>
      <p><strong>Issue:</strong> <span id="cust-issue"></span></p>
      <p><strong>Emergency:</strong> <span id="cust-emergency"></span></p>
    </div>
    <div id="job-timer">00:00:00</div>
    <button class="action-btn" id="open-checks">Start Essential Checks</button>
  </div>
</div>

<!-- Essential Checks Modal -->
<div id="checks-modal" class="modal">
  <div class="modal-content">
    <span id="close-checks" class="close-btn">&times;</span>
    <h2>Essential Checks (AA/RAC Style)</h2>

    <h3>Visual & Safety</h3>
    <label><input type="checkbox" class="check-item"> Check for leaks (oil, coolant, fuel)</label>
    <label><input type="checkbox" class="check-item"> Check tires: pressure & condition</label>
    <label><input type="checkbox" class="check-item"> Check exterior lights & signals</label>

    <h3>Battery & Electrical</h3>
    <label><input type="checkbox" class="check-item"> Battery voltage</label>
    <label><input type="checkbox" class="check-item"> Starter motor function</label>
    <label><input type="checkbox" class="check-item"> Check fuses & warning lights</label>

    <h3>Fluids</h3>
    <label><input type="checkbox" class="check-item"> Engine oil level</label>
    <label><input type="checkbox" class="check-item"> Coolant level & condition</label>
    <label><input type="checkbox" class="check-item"> Brake fluid</label>

    <h3>Engine & Driveability</h3>
    <label><input type="checkbox" class="check-item"> Engine starts / runs smoothly</label>
    <label><input type="checkbox" class="check-item"> Listen for unusual noises</label>
    <label><input type="checkbox" class="check-item"> Transmission / clutch operation</label>

    <h3>Quick Fix / Advice</h3>
    <label><input type="checkbox" class="check-item"> Recommend tow / repair / parts replacement</label>
    <label><input type="checkbox" class="check-item"> Take photos if needed</label>
    <label><input type="checkbox" class="check-item"> Capture mechanic notes</label>

    <button id="save-checks" class="action-btn">Save & Close Checks</button>
  </div>
</div>

<script>
/* QR Scan placeholder */
const startScan = document.getElementById("start-qr-scan");
startScan.onclick = ()=>{
  // For demo, fake QR data
  const customerData = {
    name:"John Doe",
    reg:"AB12 CDE",
    location:"Tesco Extra, A229, Snodland",
    issue:"Car won't start, clicking noise",
    emergency:"Yes"
  };
  openJobCard(customerData);
};

/* Job Modal */
const jobModal = document.getElementById("job-modal");
const closeJob = document.getElementById("close-job");
const custName = document.getElementById("cust-name");
const custReg = document.getElementById("cust-reg");
const custLocation = document.getElementById("cust-location");
const custIssue = document.getElementById("cust-issue");
const custEmergency = document.getElementById("cust-emergency");
let jobTimerInterval;

function openJobCard(data){
  custName.textContent = data.name;
  custReg.textContent = data.reg;
  custLocation.textContent = data.location;
  custIssue.textContent = data.issue;
  custEmergency.textContent = data.emergency;
  jobModal.style.display="flex";
  startJobTimer();
}
closeJob.onclick = ()=>{ jobModal.style.display="none"; clearInterval(jobTimerInterval); }

/* Timer */
function startJobTimer(){
  let seconds = 0;
  const display = document.getElementById("job-timer");
  jobTimerInterval = setInterval(()=>{
    seconds++;
    const h = String(Math.floor(seconds/3600)).padStart(2,'0');
    const m = String(Math.floor((seconds%3600)/60)).padStart(2,'0');
    const s = String(seconds%60).padStart(2,'0');
    display.textContent = `${h}:${m}:${s}`;
    if(seconds > 3600){ display.style.color="red"; } // warning if >1hr
  },1000);
}

/* Essential Checks Modal */
const checksModal = document.getElementById("checks-modal");
const openChecks = document.getElementById("open-checks");
const closeChecks = document.getElementById("close-checks");
const saveChecks = document.getElementById("save-checks");

openChecks.onclick = ()=>{ checksModal.style.display="flex"; };
closeChecks.onclick = ()=>{ checksModal.style.display="none"; };
saveChecks.onclick = ()=>{
  const completed = [];
  document.querySelectorAll(".check-item").forEach((chk)=>{
    if(chk.checked) completed.push(chk.parentNode.textContent.trim());
  });
  console.log("Completed checks:", completed);
  checksModal.style.display="none";
};
</script>

</body>
</html>