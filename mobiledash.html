<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mechanic Dashboard</title>
<link rel="stylesheet" href="style.css">
<style>
/* --- Layout --- */
body, html {
  margin:0; padding:0; font-family:sans-serif; background:#111; color:#fff;
}
#top-ticker {
  position:fixed; top:0; left:0; width:100%; background:#222; color:#0f0;
  padding:10px; overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
  z-index:1000;
  border-bottom:2px solid #0f0;
}
#job-list {
  margin-top:50px; /* space for ticker */
  max-height:60vh; /* show approx 3 jobs in viewport */
  overflow-y:auto;
  padding:10px;
}
.job-card {
  background:#222; margin:10px 0; padding:15px; border-radius:12px;
  box-shadow:0 0 10px #8e2eff, 0 0 20px #00ff66;
  cursor:pointer;
  transition: transform 0.2s;
}
.job-card:hover { transform:scale(1.02); }
.job-title { font-size:1.1rem; font-weight:bold; color:#8e2eff; }
.job-location { font-size:0.9rem; color:#0f0; margin-top:5px; }

/* --- Map --- */
#map { width:100%; height:200px; margin-top:10px; border-radius:12px; }

/* --- QR Scan Section --- */
#qr-section {
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  border:3px solid #8e2eff; box-shadow:0 0 20px #8e2eff, 0 0 40px #00ff66;
  border-radius:15px; padding:15px; margin:10px auto; width:90%; max-width:350px;
  text-align:center; cursor:pointer;
}
#qr-section h2 { color:#8e2eff; text-shadow:0 0 10px #8e2eff; }
#qr-section p { color:#00ff66; text-shadow:0 0 8px #00ff66; }
#qr-section button {
  background:#8e2eff; color:white; padding:10px 20px; border:none;
  border-radius:10px; font-weight:bold; box-shadow:0 0 15px #00ff66; margin-top:10px;
}

/* --- Modals --- */
.modal {
  display:none; position:fixed; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.95); justify-content:center; align-items:flex-start;
  overflow-y:auto; z-index:1000; padding-top:20px;
}
.modal-content {
  background:#222; color:#fff; border-radius:12px; padding:20px;
  width:95%; max-width:500px; margin:0 auto 30px auto; box-shadow:0 0 15px #00ff66;
}
.close-btn { float:right; cursor:pointer; font-size:1.5rem; color:#0f0; }

/* --- Timer --- */
#job-timer { font-size:1.2rem; font-weight:bold; margin-top:10px; color:#0f0; }

/* --- Footer Toolbar --- */
#footer-toolbar {
  position:fixed; bottom:0; left:0; width:100%; background:#222; display:flex;
  justify-content:space-around; padding:10px 0; border-top:2px solid #0f0; z-index:1000;
}
#footer-toolbar button { background:#8e2eff; color:white; border:none; border-radius:10px;
  padding:10px 15px; font-weight:bold; box-shadow:0 0 10px #00ff66; }
</style>
</head>
<body>

<!-- Top live ticker -->
<div id="top-ticker">Live Jobs: Emergency breakdown at AB12 CDE | New service request AJ62KSV | Diagnostic pending at XY34 ZZZ</div>

<!-- QR Scan Section -->
<div id="qr-section">
  <h2>Scan QR to Start Job</h2>
  <p>Tap to activate camera or upload QR image</p>
  <button id="start-qr-scan">Activate QR Scanner</button>
</div>

<!-- Job List (Scrollable, 7 jobs, 3 visible in viewport) -->
<div id="job-list">
  <div class="job-card"><div class="job-title">AB12 CDE</div><div class="job-location">Tesco Extra, Snodland</div></div>
  <div class="job-card"><div class="job-title">AJ62 KSV</div><div class="job-location">Morrisons, Rochester</div></div>
  <div class="job-card"><div class="job-title">XY34 ZZZ</div><div class="job-location">Asda, Gillingham</div></div>
  <div class="job-card"><div class="job-title">GH56 JKL</div><div class="job-location">Sainsbury, Chatham</div></div>
  <div class="job-card"><div class="job-title">MN78 OPQ</div><div class="job-location">Tesco Extra, Maidstone</div></div>
  <div class="job-card"><div class="job-title">RS90 UVW</div><div class="job-location">Waitrose, Sittingbourne</div></div>
  <div class="job-card"><div class="job-title">YZ12 ABC</div><div class="job-location">Asda, Tonbridge</div></div>
</div>

<!-- Map below jobs -->
<div id="map"></div>

<!-- Job Modal -->
<div id="job-modal" class="modal">
  <div class="modal-content">
    <span id="close-job" class="close-btn">&times;</span>
    <h2>Job Card</h2>
    <div id="customer-info">
      <p><strong>Name:</strong> <span id="cust-name"></span></p>
      <p><strong>Car Reg:</strong> <span id="cust-reg"></span></p>
      <p><strong>Location:</strong> <span id="cust-location"></span></p>
      <p><strong>Issue:</strong> <span id="cust-issue"></span></p>
      <p><strong>Emergency:</strong> <span id="cust-emergency"></span></p>
    </div>
    <div id="job-timer">00:00:00</div>
    <button class="action-btn" id="open-checks">Start Essential Checks</button>
  </div>
</div>

<!-- Essential Checks Modal -->
<div id="checks-modal" class="modal">
  <div class="modal-content">
    <span id="close-checks" class="close-btn">&times;</span>
    <h2>Essential Checks</h2>
    <h3>Visual & Safety</h3>
    <label><input type="checkbox" class="check-item"> Check for leaks</label>
    <label><input type="checkbox" class="check-item"> Check tires</label>
    <label><input type="checkbox" class="check-item"> Lights & signals</label>
    <label><input type="checkbox" class="check-item"> Engine oil</label>
    <label><input type="checkbox" class="check-item"> Brake fluid</label>
    <button id="save-checks" class="action-btn">Save & Close</button>
  </div>
</div>

<!-- Footer Toolbar -->
<div id="footer-toolbar">
  <button>Scan QR</button>
  <button>Dashboard</button>
  <button>Completed Jobs</button>
  <button>Settings</button>
</div>

<script>
// --- Job & QR interactions ---
const startScan = document.getElementById("start-qr-scan");
const jobModal = document.getElementById("job-modal");
const closeJob = document.getElementById("close-job");
const checksModal = document.getElementById("checks-modal");
const openChecks = document.getElementById("open-checks");
const closeChecks = document.getElementById("close-checks");
const saveChecks = document.getElementById("save-checks");

const custName = document.getElementById("cust-name");
const custReg = document.getElementById("cust-reg");
const custLocation = document.getElementById("cust-location");
const custIssue = document.getElementById("cust-issue");
const custEmergency = document.getElementById("cust-emergency");

let jobTimerInterval;

startScan.onclick = () => {
  // Placeholder for real QR scan
  const customerData = {
    name:"John Doe",
    reg:"AB12 CDE",
    location:"Tesco Extra, A229, Snodland",
    issue:"Car won't start",
    emergency:"Yes"
  };
  custName.textContent = customerData.name;
  custReg.textContent = customerData.reg;
  custLocation.textContent = customerData.location;
  custIssue.textContent = customerData.issue;
  custEmergency.textContent = customerData.emergency;
  jobModal.style.display = "flex";
  startJobTimer();
};

closeJob.onclick = () => { jobModal.style.display="none"; clearInterval(jobTimerInterval); };

openChecks.onclick = () => { checksModal.style.display="flex"; };
closeChecks.onclick = () => { checksModal.style.display="none"; };
saveChecks.onclick = () => { 
  document.querySelectorAll(".check-item").forEach(chk=>chk.checked=false);
  checksModal.style.display="none"; 
};

function startJobTimer(){
  let seconds=0;
  const display=document.getElementById("job-timer");
  jobTimerInterval=setInterval(()=>{
    seconds++;
    const h = String(Math.floor(seconds/3600)).padStart(2,'0');
    const m = String(Math.floor((seconds%3600)/60)).padStart(2,'0');
    const s = String(seconds%60).padStart(2,'0');
    display.textContent=`${h}:${m}:${s}`;
    if(seconds>3600) display.style.color="red";
  },1000);
}

// --- Map placeholder (OSM integration later) ---
document.getElementById("map").innerHTML = "<p style='color:#0f0;text-align:center;margin-top:80px;'>Map loading here...</p>";
</script>

</body>
</html>